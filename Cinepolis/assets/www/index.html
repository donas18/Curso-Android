<!DOCTYPE html>
<html>
    <head>
        <title>Cinepolis</title>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />

        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <link rel="stylesheet" type="text/css" href="css/themes/default/jquery.mobile-1.3.0.css" />
        <link rel="shortcut icon" href="docs/favicon.ico">

        <script type="text/javascript" src="cordova-2.4.0.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/jquery.mobile-1.3.0.js"></script>
        <script type="text/javascript">
            app.initialize();
            
            function loadMain(){
                  $.mobile.loading("show", {
                      textVisible: false,
                      theme: "b"
                  });
                  
                  //Borrar elementos de la lista
                  $("#List_ciudades").children().remove("li");
                  
                  //Pedimos al servidor lista de ciudades y complejos
                  $.ajax({
                      type: "GET",
                      url: "http://api.lesthack.com.mx/cinepolis/ciudades_complejos.json",
                      async: false,
                      jsonpCallback: "jsonCallback",
                      contentType: "application/json",
                      dataType: "jsonp",
                      succes: function(data_json){
                           console.log(data_json);
                      },
                      error: function(err){
                           console.log("Error: "+err);
                      }
                  });
            }
            
            $(function(){
                  $.mobile.changePage($("#ciudades"));
                  loadMain();
            });

        </script>

    </head>
    <body>

          <div data-role="page" id="ciudades">
               <div data-role="header" data-theme="b" data-position="fixed">
                    <h4>Ciudades</h4>
               </div>
               <div data-role="content">
                  <ul id="List_ciudades" data-role="listview" data-inset="true" data-filter="true">
                      <li><a href="#complejos">Ciudad 1</a></li>
                      <li><a href="#complejos">Ciudad 2</a></li>
                  </ul>
               </div>
               <div data-role="footer" data-theme="b" data-position="fixed">
                    <h4>Cinepolis</h4>
               </div>
          </div>}
          
          <div data-role="page" id="complejos">
               <div data-role="header" data-theme="b" data-position="fixed">
                    <h4>Complejos</h4>
                    <a href="#" data-role="button" data-icon="back" data-iconpos="notext" data-rel="back" class="ui-btn-right">back</a>
               </div>
               <div data-role="content">
                  <ul data-role="listview" data-inset="true" data-filter="true">
                      <li><a href="#cartelera">Complejo 1</a></li>
                      <li><a href="#cartelera">Complejo 2</a></li>
                  </ul>
               </div>
               <div data-role="footer" data-theme="b" data-position="fixed">
                    <h4>Cinepolis</h4>
               </div>
          </div>
          
          
          <div data-role="page" id="cartelera">
               <div data-role="header" data-theme="b" data-position="fixed">
                    <h4>Cartelera</h4>
                    <a href="#" data-role="button" data-icon="back" data-iconpos="notext" data-rel="back" class="ui-btn-right">back</a>
               </div>
               <div data-role="content">
                  <ul data-role="listview" data-inset="true" data-filter="true">
                      <li>
                          <a href="#">
                             <img src="img/cordova.png" />
                             <h2>Titulo Movie 1</h2>
                             <p>Descripcion</p>
                          </a>
                      </li>
                      <li>
                          <a href="#">
                             <img src="img/cordova.png" />
                             <h2>Titulo Movie 2</h2>
                             <p>Descripcion</p>
                          </a>
                      </li>
                  </ul>
               </div>
               <div data-role="footer" data-theme="b" data-position="fixed">
                    <h4>Cinepolis</h4>
               </div>
          </div>
    </body>
</html>

